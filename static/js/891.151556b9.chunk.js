"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[891],{891:(e,a,n)=>{n.r(a),n.d(a,{default:()=>m});var t=n(9379),o=n(5043),r=n(6698),s=n(8526),i=n(1367);const c=()=>{switch("devnet".toLowerCase()){case"mainnet":return"Mainnet";case"testnet":return"Testnet";default:return"Devnet"}},l=async()=>{const e="devnet",a=await(async()=>{try{var e;if(null!==(e=window.aptos)&&void 0!==e&&e.network){const e=await window.aptos.network();return(null===e||void 0===e?void 0:e.name)||e||null}return null}catch(a){return console.warn("Failed to get current network:",a),null}})();if(!a)return{isCompatible:!0,expected:e,actual:a,warning:"Could not detect wallet network"};const n=a.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(a.toLowerCase());return{isCompatible:n,expected:e,actual:a,warning:n?void 0:"Please switch to ".concat(e.toUpperCase()," network")}};var d=n(579);const u=(0,o.lazy)(()=>n.e(990).then(n.bind(n,9990))),m=()=>{const{account:e,signAndSubmitTransaction:a}=(0,r.vT)(),{state:m,setImageData:g,setLoading:p,setTransactionHash:w}=(0,i.U)(),h=(0,o.useCallback)(e=>{g(e),w("")},[g,w]),v=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";console.error("".concat(a.toUpperCase(),": ").concat(e));const n=document.createElement("div");n.className="notification notification-".concat(a),n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: ".concat("error"===a?"#ff4444":"warning"===a?"#ffaa00":"#0099ff",";\n      color: white;\n      padding: 16px 24px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n      max-width: 400px;\n      animation: slideIn 0.3s ease-out;\n    "),n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&(n.style.animation="slideOut 0.3s ease-out",setTimeout(()=>n.remove(),300))},5e3)};return(0,d.jsx)("div",{className:"app-container",children:(0,d.jsxs)("div",{className:"app-content",children:[(0,d.jsx)(s.A,{}),(0,d.jsx)("main",{className:"main-content aura-main-content",children:(0,d.jsxs)("div",{className:"aura-section aura-section-compact",children:[(0,d.jsx)("div",{className:"aura-generator-wrapper",children:(0,d.jsx)(o.Suspense,{fallback:(0,d.jsx)("div",{className:"aura-loading-fallback",children:(0,d.jsx)("div",{className:"loading-spinner"})}),children:(0,d.jsx)(u,{moodSeed:m.moodSeed,transactionCount:m.transactionCount,onImageGenerated:h})})}),m.imageData&&(0,d.jsx)("div",{className:"aura-content-wrapper",children:(0,d.jsxs)("div",{className:"action-buttons action-buttons-compact",children:[(0,d.jsxs)("button",{onClick:async()=>{var o;const[r,s]=await Promise.all([Promise.resolve().then(n.bind(n,6773)),n.e(786).then(n.bind(n,8786))]),{validateWalletConnection:i,validateMoodSeed:d,validateTransactionCount:u,validateImageData:g}=r,{apiService:h,createNFTMetadata:f,isStorageAvailable:N}=s,y=await l();if(!y.isCompatible)return void v("Network mismatch detected. Please switch your wallet to ".concat(y.expected," network. Currently on: ").concat(y.actual||"unknown"),"error");const b=i(null===e||void 0===e||null===(o=e.address)||void 0===o?void 0:o.toString());if(!b.isValid)return void v(b.error,"warning");const x=d(m.moodSeed);if(!x.isValid)return void v(x.error,"warning");const T=u(m.transactionCount);if(!T.isValid)return void v(T.error,"error");const C=g(m.imageData);if(!C.isValid)return void v(C.error,"warning");const S=await N();S||v("Storage service not available. Using demo mode for NFT minting.","warning"),p(!0),w("");try{var k;const o="Aura-".concat(m.moodSeed.replace(/[^a-zA-Z0-9]/g,""),"-").concat(Date.now()),r="Personal aura NFT generated from ".concat(m.transactionCount,' transactions with mood "').concat(m.moodSeed,'"');let s;if(S){const e=await fetch(m.imageData).then(e=>e.blob());console.log("Uploading your aura NFT to IPFS...");const a=f(o,r,"",[{trait_type:"Mood",value:m.moodSeed},{trait_type:"Transaction Count",value:m.transactionCount.toString()},{trait_type:"Generated At",value:(new Date).toISOString()},{trait_type:"Generator",value:"Aptos Aura Weaver v1.0"}]),n=await h.uploadNFT({imageFile:e,metadata:a});if(!n.success)throw new Error("NFT upload failed: ".concat(n.error));s=n.url,console.log("\ud83c\udfa8 Minting NFT with parameters:",(0,t.A)((0,t.A)({tokenName:o,moodSeed:m.moodSeed,transactionCount:m.transactionCount,uri:s},n.imageHash&&{imageHash:n.imageHash}),n.hash&&{metadataHash:n.hash}))}else{console.log("Creating your aura NFT with demo metadata...");const e="https://demo.aura-aptos.com/nft/".concat(o.replace(/[^a-zA-Z0-9]/g,""));s=e,console.log("\ud83c\udfa8 Minting NFT with parameters (Demo Mode):",{tokenName:o,moodSeed:m.moodSeed,transactionCount:m.transactionCount,uri:e})}console.log('Minting Started: Creating your aura NFT "'.concat(o,'"...'));const i=await a({data:{function:"0x0b65f8046e689981c490d760553a03b9d11775d03d78c141d6a44041c3b12a43::aura_nft::mint_aura",functionArguments:[m.moodSeed,m.transactionCount,o,s]},options:{maxGasAmount:1e4,gasUnitPrice:100}});console.log("\ud83c\udfa8 Transaction submitted:",i.hash);const l=await Promise.resolve().then(n.bind(n,305)),d="devnet",u="https://fullnode.devnet.aptoslabs.com/v1",g=new l.AptosConfig({network:d,fullnode:u}),p=new l.Aptos(g),v=await p.waitForTransaction({transactionHash:i.hash});console.log("\u2705 Transaction confirmed:",v),w(i.hash);const N=!S?'Your aura NFT "'.concat(o,'" has been minted in demo mode! (Storage service not available)'):"Your aura NFT has been minted with IPFS storage! View it on Aptos ".concat(c(),".");console.log("NFT Minted Successfully: ".concat(N)),console.log("\u2705 NFT Minting Details:",{tokenName:o,description:r,moodSeed:m.moodSeed,transactionCount:m.transactionCount,walletAddress:null===e||void 0===e||null===(k=e.address)||void 0===k?void 0:k.toString(),imageDataSize:m.imageData.length,transactionHash:i.hash,timestamp:(new Date).toISOString()}),alert("Success: ".concat(N))}catch(A){console.error("\u274c Error minting NFT:",A);const{message:e,type:a}=(e=>{const a=(null===e||void 0===e?void 0:e.message)||(null===e||void 0===e?void 0:e.toString())||"",n=(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.status);return a.includes("INSUFFICIENT_BALANCE_FOR_TRANSACTION_FEE")||a.includes("insufficient funds")?{message:"Insufficient APT balance for gas fees. Please add more APT to your wallet.",type:"error"}:a.includes("SEQUENCE_NUMBER_TOO_OLD")||a.includes("sequence number")?{message:"Transaction sequence error. Please refresh your wallet and try again.",type:"warning"}:a.includes("TRANSACTION_EXPIRED")||a.includes("expired")?{message:"Transaction expired due to network delay. Please try again.",type:"warning"}:a.includes("INVALID_SIGNATURE")||a.includes("signature")?{message:"Invalid signature. Please check your wallet connection and try again.",type:"error"}:a.includes("MODULE_NOT_FOUND")||a.includes("module")?{message:"Smart contract not found. Please ensure you are on the correct network (Devnet).",type:"error"}:a.includes("FUNCTION_NOT_FOUND")||a.includes("function")?{message:"Contract function not available. The smart contract may need updating.",type:"error"}:a.includes("INVALID_ARGUMENT")||a.includes("argument")?{message:"Invalid transaction parameters. Please refresh and try again.",type:"error"}:a.includes("rejected")||a.includes("denied")||a.includes("cancelled")?{message:"Transaction was rejected. Please approve the transaction to continue.",type:"warning"}:a.includes("network")||a.includes("connection")||a.includes("timeout")?{message:"Network connection issue. Please check your internet connection and try again.",type:"warning"}:a.includes("gas")||a.includes("Gas")?{message:"Gas estimation failed. Please try again with a higher gas limit.",type:"error"}:429===n||a.includes("rate limit")||a.includes("too many requests")?{message:"Too many requests. Please wait a moment and try again.",type:"warning"}:{message:"Transaction failed: ".concat(a||"Unknown error occurred"),type:"error"}})(A);v(e,a),console.error("Detailed error info:",{originalError:A,errorMessage:null===A||void 0===A?void 0:A.message,errorCode:null===A||void 0===A?void 0:A.code,errorStatus:null===A||void 0===A?void 0:A.status,stack:null===A||void 0===A?void 0:A.stack})}finally{p(!1)}},disabled:m.loading,className:"btn btn-primary btn-connect-wallet ".concat(m.loading?"loading":""),children:[m.loading&&(0,d.jsx)("span",{className:"loading-spinner"}),(0,d.jsx)("span",{className:"generate-text",children:m.loading?"Minting...":"Mint as NFT"}),(0,d.jsx)("div",{className:"generate-glow"})]}),(0,d.jsxs)("button",{onClick:()=>{if(m.imageData)try{const e="aura-".concat(m.moodSeed.replace(/[^a-zA-Z0-9]/g,""),"-").concat(Date.now(),".png"),a=document.createElement("a");a.download=e,a.href=m.imageData,document.body.appendChild(a),a.click(),document.body.removeChild(a),'Aura image "'.concat(e,'" downloaded successfully!')}catch(e){v("Failed to download image","error")}else v("No aura image available to download","warning")},className:"btn btn-primary btn-connect-wallet btn-download-aura",title:"Download your aura as PNG",children:[(0,d.jsx)("span",{className:"generate-text",children:"Download"}),(0,d.jsx)("div",{className:"generate-glow"})]}),m.lastTransactionHash&&""!==m.lastTransactionHash.trim()&&(0,d.jsxs)("button",{onClick:()=>(e=>{const a=(e=>{switch("devnet".toLowerCase()){case"mainnet":return"https://explorer.aptoslabs.com/txn/".concat(e,"?network=mainnet");case"testnet":return"https://explorer.aptoslabs.com/txn/".concat(e,"?network=testnet");default:return"https://explorer.aptoslabs.com/txn/".concat(e,"?network=devnet")}})(e);window.open(a,"_blank","noopener,noreferrer")})(m.lastTransactionHash),className:"btn btn-secondary btn-connect-wallet btn-explorer",title:"View transaction on Aptos ".concat(c()),children:[(0,d.jsxs)("span",{className:"generate-text",children:["View on Aptos ",c()]}),(0,d.jsx)("div",{className:"generate-glow"})]})]})})]})}),(0,d.jsx)("footer",{className:"mvp-footer",children:(0,d.jsx)("p",{className:"mvp-note mvp-note-compact",children:"Live on Aptos Devnet! Switch to Devnet in your wallet and faucet APT."})})]})})}}}]);
//# sourceMappingURL=891.151556b9.chunk.js.map