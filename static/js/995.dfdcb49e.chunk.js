"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[995],{3995:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var o=t(5043),s=t(3367),a=t(6698),r=t(8526),i=t(1367),l=t(579);const c=()=>{var e;const{account:n,disconnect:c}=(0,a.vT)(),d=(0,s.Zp)(),{state:u,setMoodSeed:h,setTransactionCount:m,setLoading:v}=(0,i.U)(),[p,w]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!1),[k,y]=(0,o.useState)(!1),j=(0,o.useCallback)(async()=>{if(null===n||void 0===n||!n.address)return;if(await(async()=>{try{var e;const n="devnet";if(null!==(e=window.aptos)&&void 0!==e&&e.network){const e=await window.aptos.network(),t=(null===e||void 0===e?void 0:e.name)||e;if(t&&!t.toLowerCase().includes(n.toLowerCase()))return alert("Network Warning: Please switch your wallet to ".concat(n.toUpperCase()," network. Currently connected to: ").concat(t)),!1}return!0}catch(n){return console.warn("Network compatibility check failed:",n),!0}})()){w(!0),v(!0);try{const{Aptos:e,AptosConfig:o,Network:s}=await Promise.resolve().then(t.bind(t,305)),a=new e(new o({network:"devnet",fullnode:"https://fullnode.devnet.aptoslabs.com/v1"})),r=n.address.toString(),i=await a.getAccountInfo({accountAddress:r});if(!i||"undefined"===typeof i.sequence_number)throw new Error("Invalid response from Aptos node");const l=parseInt(i.sequence_number);m(l),0===l&&alert("Your account has no transactions yet. You can still create an aura!")}catch(e){console.error("Error fetching user data:",e);const n=(null===e||void 0===e?void 0:e.message)||(null===e||void 0===e?void 0:e.toString())||"";n.includes("not found")||n.includes("Invalid response")?(m(0),alert("Account not found on Aptos network. This is normal for new accounts. Using transaction count: 0")):n.includes("network")||n.includes("fetch")||!navigator.onLine?alert("Network error. Please check your internet connection and try again."):n.includes("timeout")||n.includes("TIMEOUT")?alert("Request timed out. The network may be slow. Please try again."):n.includes("rate limit")||n.includes("429")?alert("Too many requests. Please wait a moment and try again."):n.includes("CORS")||n.includes("cors")?alert("Connection blocked by browser security. Please try refreshing the page."):n.includes("Unauthorized")||n.includes("401")?alert("Authorization error. Please reconnect your wallet."):(alert("Unable to fetch account data: ".concat(n,". Using demo values for now.")),m(Math.floor(50*Math.random())+5))}finally{w(!1),v(!1)}}},[n,m,v]);(0,o.useEffect)(()=>{null===n||void 0===n||!n.address||k||0!==u.transactionCount||p||(y(!0),j())},[null===n||void 0===n?void 0:n.address,k,u.transactionCount,p,j]),(0,o.useEffect)(()=>{null!==n&&void 0!==n&&n.address||y(!1)},[null===n||void 0===n?void 0:n.address]);return(0,l.jsx)("div",{className:"app-container",children:(0,l.jsxs)("div",{className:"app-content",children:[(0,l.jsx)(r.A,{}),(0,l.jsx)("main",{className:"main-content",children:(0,l.jsx)("div",{className:"wallet-section",children:(0,l.jsxs)("div",{className:"wallet-main",children:[(0,l.jsxs)("div",{className:"wallet-header-info",children:[(0,l.jsx)("div",{className:"wallet-address-display",children:(0,l.jsxs)("span",{className:"address-value ".concat(x?"copied":""),onClick:async()=>{if(null!==n&&void 0!==n&&n.address)try{await navigator.clipboard.writeText(n.address.toString()),f(!0),setTimeout(()=>f(!1),2e3)}catch(e){console.error("Failed to copy address:",e)}},style:{cursor:"pointer"},children:[null===n||void 0===n||null===(e=n.address)||void 0===e?void 0:e.toString(),(0,l.jsxs)("svg",{className:"copy-icon",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,l.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),(0,l.jsx)("svg",{className:"checkmark-icon ".concat(x?"visible":""),width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.jsx)("polyline",{points:"20,6 9,17 4,12"})})]})}),(0,l.jsx)("button",{onClick:c,className:"disconnect-btn",title:"Disconnect Wallet",children:(0,l.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,l.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,l.jsxs)("div",{className:"mood-input-section",children:[(0,l.jsxs)("div",{className:"mood-input-container",children:[(0,l.jsx)("label",{className:"mood-label",children:"Your Mood Seed"}),(0,l.jsx)("input",{type:"text",value:u.moodSeed,onChange:e=>h(e.target.value),onFocus:e=>e.target.select(),placeholder:"",className:"mood-input",spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})]}),(0,l.jsxs)("div",{className:"data-fetch-section",children:[(0,l.jsx)("button",{onClick:()=>{y(!1),j()},disabled:p,className:"sync-btn",title:"Refresh transaction data",children:(0,l.jsxs)("svg",{className:"sync-icon ".concat(p?"rotating":""),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("polyline",{points:"23,4 23,10 17,10"}),(0,l.jsx)("polyline",{points:"1,20 1,14 7,14"}),(0,l.jsx)("path",{d:"M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4l-4.64,4.36A9,9,0,0,1,3.51,15"})]})}),(0,l.jsxs)("span",{className:"tx-count",children:["Tx: ",u.transactionCount]})]})]}),(0,l.jsx)("div",{className:"generate-section",children:(0,l.jsxs)("button",{onClick:()=>{u.moodSeed.trim()?d("/aura"):alert("Please enter a mood seed to continue.")},disabled:!u.moodSeed.trim()||u.transactionCount<0,className:"btn btn-primary btn-connect-wallet",children:[(0,l.jsx)("span",{className:"generate-text",children:"Generate My Aura"}),(0,l.jsx)("div",{className:"generate-glow"})]})})]})})})]})})}}}]);
//# sourceMappingURL=995.dfdcb49e.chunk.js.map